// SPDX-License-Identifier: GPL-2.0

/*
 * Copyright (c) 2012-2018, The Linux Foundation. All rights reserved.
 * Copyright (C) 2018 Linaro Ltd.
 */
#ifndef _IPAHAL_REG_I_H_
#define _IPAHAL_REG_I_H_

void ipahal_reg_init(enum ipa_hw_version hw_version);

/* IPA_ROUTE register */
#define ROUTE_DIS_BMSK				0x00000001
#define ROUTE_DEF_PIPE_BMSK			0x0000003e
#define ROUTE_DEF_HDR_TABLE_BMSK		0x00000040
#define ROUTE_DEF_HDR_OFST_BMSK			0x0001ff80
#define ROUTE_FRAG_DEF_PIPE_BMSK		0x003e0000
#define ROUTE_DEF_RETAIN_HDR_BMSK		0x01000000

/* IPA_ENDP_INIT_HDR_n register */
#define HDR_LEN_BMSK				0x0000003f
#define HDR_OFST_METADATA_VALID_BMSK		0x00000040
#define HDR_OFST_METADATA_BMSK			0x00001f80
#define HDR_ADDITIONAL_CONST_LEN_BMSK		0x0007e000
#define HDR_OFST_PKT_SIZE_VALID_BMSK		0x00080000
#define HDR_OFST_PKT_SIZE_BMSK			0x03f00000
#define HDR_A5_MUX_BMSK				0x04000000
#define HDR_LEN_INC_DEAGG_HDR_BMSK_v2		0x08000000
#define HDR_METADATA_REG_VALID_BMSK_v2		0x10000000

/* IPA_ENDP_INIT_HDR_EXT_n register */
#define HDR_ENDIANNESS_BMSK			0x00000001
#define HDR_TOTAL_LEN_OR_PAD_VALID_BMSK		0x00000002
#define HDR_TOTAL_LEN_OR_PAD_BMSK		0x00000004
#define HDR_PAYLOAD_LEN_INC_PADDING_BMSK	0x00000008
#define HDR_TOTAL_LEN_OR_PAD_OFFSET_BMSK	0x000003f0
#define HDR_PAD_TO_ALIGNMENT_BMSK_v3_0		0x00003c00

/* IPA_ENDP_INIT_AGGR_n register */
#define AGGR_HARD_BYTE_LIMIT_ENABLE_BMSK	0x01000000
#define AGGR_FORCE_CLOSE_BMSK			0x00400000
#define AGGR_SW_EOF_ACTIVE_BMSK			0x00200000
#define AGGR_PKT_LIMIT_BMSK			0x001f8000
#define AGGR_TIME_LIMIT_BMSK			0x00007c00
#define AGGR_BYTE_LIMIT_BMSK			0x000003e0
#define AGGR_TYPE_BMSK				0x0000001c
#define AGGR_EN_BMSK				0x00000003

/* IPA_AGGR_FORCE_CLOSE register */
#define PIPE_BITMAP_BMSK			0x3fffffff
#define PIPE_BITMAP_BMSK_V3_5			0x000fffff
#define PIPE_BITMAP_BMSK_V4_0			0x007fffff

/* IPA_ENDP_INIT_ROUTE_n register */
#define ROUTE_TABLE_INDEX_BMSK			0x0000001f

/* IPA_ENDP_INIT_MODE_n register */
#define HDR_FTCH_DISABLE_BMSK			0x40000000
#define PAD_EN_BMSK				0x20000000
#define PIPE_REPLICATION_EN_BMSK		0x10000000
#define BYTE_THRESHOLD_BMSK			0x0ffff000
#define DEST_PIPE_INDEX_BMSK			0x000001f0
#define MODE_BMSK				0x7

/* IPA_ENDP_INIT_NAT_n register */
#define NAT_EN_BMSK				0x00000003

/* IPA_ENDP_INIT_CTRL_n register */
#define ENDP_SUSPEND_BMSK			0x00000001
#define ENDP_DELAY_BMSK				0x00000002

/* IPA_ENDP_INIT_CTRL_SCND_n register */
#define ENDP_DELAY_BMSK				0x00000002

/* IPA_ENDP_INIT_HOL_BLOCK_EN_n register */
#define HOL_BLOCK_EN_RMSK			0x00000001
#define HOL_BLOCK_EN_MAX			19
#define HOL_BLOCK_EN_MAX_V_4_0			22
#define HOL_BLOCK_EN_BMSK			0x00000001

/* IPA_ENDP_INIT_HOL_BLOCK_TIMER_n register */
#define TIMER_BMSK				0xffffffff

/* IPA_ENDP_INIT_DEAGGR_n register */
#define MAX_PACKET_LEN_BMSK			0xffff0000
#define PACKET_OFFSET_LOCATION_BMSK		0x00003f00
#define PACKET_OFFSET_VALID_BMSK		0x00000080
#define DEAGGR_HDR_LEN_BMSK			0x0000003f

/* IPA_ENDP_INIT_SEQ_n register */
#define DPS_REP_SEQ_TYPE_BMSK			0x0000f000
#define HPS_REP_SEQ_TYPE_BMSK			0x00000f00
#define DPS_SEQ_TYPE_BMSK			0x000000f0
#define HPS_SEQ_TYPE_BMSK			0x0000000f

/* IPA_DEBUG_CNT_REG_n register */
#define DBG_CNT_RMSK				0xffffffff
#define DBG_CNT_MAX				15
#define DBG_CNT_REG_BMSK			0xffffffff

/* IPA_ENDP_INIT_CFG_n register */
#define CS_GEN_QMB_MASTER_SEL_BMSK		0x00000100
#define CS_METADATA_HDR_OFFSET_BMSK		0x00000078
#define CS_OFFLOAD_EN_BMSK			0x00000006
#define FRAG_OFFLOAD_EN_BMSK			0x00000001

/* IPA_ENDP_INIT_HDR_METADATA_MASK_n register */
#define METADATA_MASK_BMSK			0xffffffff

/* IPA_ENDP_INIT_HDR_METADATA_n register */
#define METADATA_BMSK				0xffffffff

/* IPA_ENDP_INIT_RSRC_GRP_n register */
#define RSRC_GRP_BMSK				0x00000007
#define RSRC_GRP_BMSK_v3_5			0x00000003

/* IPA_SHARED_MEM_SIZE register */
#define SHARED_MEM_BADDR_BMSK			0xffff0000
#define SHARED_MEM_SIZE_BMSK			0x0000ffff

/* IPA_DEBUG_CNT_CTRL_n register */
#define RULE_INDEX_PIPE_RULE_BMSK		0x10000000
#define RULE_INDEX_BMSK				0x0ff00000
#define RULE_INDEX_BMSK_V3_5			0x1ff00000
#define SOURCE_PIPE_BMSK			0x0001f000
#define PRODUCT_BMSK				0x00000100
#define DBG_CNT_TYPE_BMSK			0x00000070
#define DBG_CNT_EN_BMSK				0x00000001

/* IPA_FILT_ROUT_HASH_FLUSH register */
#define IPv4_FILT_BMSK				0x00001000
#define IPv4_ROUT_BMSK				0x00000100
#define IPv6_FILT_BMSK				0x00000010
#define IPv6_ROUT_BMSK				0x00000001

/* IPA_SINGLE_NDP_MODE register */
#define SINGLE_NDP_UNDEFINED_BMSK		0xfffffffe
#define SINGLE_NDP_EN_BMSK			0x00000001

/* IPA_QCNCM register */
#define MODE_UNDEFINED2_BMSK			0xf0000000
#define MODE_VAL_BMSK				0x0ffffff0
#define QCNCM_UNDEFINED1_BMSK			0x0000000e
#define MODE_EN_BMSK				0x00000001

/* IPA_ENDP_STATUS_n register */
#define STATUS_PKT_SUPPRESS_BMSK		0x00000200
#define STATUS_LOCATION_BMSK			0x00000100
#define STATUS_ENDP_BMSK			0x0000003e
#define STATUS_EN_BMSK				0x00000001

/* IPA_ENDP_FILTER_ROUTER_HSH_CFG_n register */
#define FILTER_HASH_MSK_SRC_ID_BMSK		0x00000001
#define FILTER_HASH_MSK_SRC_IP_BMSK		0x00000002
#define FILTER_HASH_MSK_DST_IP_BMSK		0x00000004
#define FILTER_HASH_MSK_SRC_PORT_BMSK		0x00000008
#define FILTER_HASH_MSK_DST_PORT_BMSK		0x00000010
#define FILTER_HASH_MSK_PROTOCOL_BMSK		0x00000020
#define FILTER_HASH_MSK_METADATA_BMSK		0x00000040
#define FILTER_HASH_UNDEFINED1_BMSK		0x0000ff80
#define ROUTER_HASH_MSK_SRC_ID_BMSK		0x00010000
#define ROUTER_HASH_MSK_SRC_IP_BMSK		0x00020000
#define ROUTER_HASH_MSK_DST_IP_BMSK		0x00040000
#define ROUTER_HASH_MSK_SRC_PORT_BMSK		0x00080000
#define ROUTER_HASH_MSK_DST_PORT_BMSK		0x00100000
#define ROUTER_HASH_MSK_PROTOCOL_BMSK		0x00200000
#define ROUTER_HASH_MSK_METADATA_BMSK		0x00400000
#define ROUTER_HASH_UNDEFINED2_BMSK		0xff800000

/* IPA_RSRC_GRP_XY_RSRC_TYPE_n register */
#define Y_MAX_LIM_BMSK				0xff000000
#define Y_MIN_LIM_BMSK				0x00ff0000
#define X_MAX_LIM_BMSK				0x0000ff00
#define X_MIN_LIM_BMSK				0x000000ff
#define Y_MAX_LIM_BMSK_V3_5			0x3f000000
#define Y_MIN_LIM_BMSK_V3_5			0x003f0000
#define X_MAX_LIM_BMSK_V3_5			0x00003f00
#define X_MIN_LIM_BMSK_V3_5			0x0000003f

/* IPA_RX_HPS_CLIENTS_MIN/MAX_DEPTH_0/1 registers */
#define MINMAX_DEPTH_X_CLIENT_n_BMSK(n)		(0x7f << (8 * (n)))
#define MINMAX_DEPTH_X_CLIENT_n_BMSK_V3_5(n)	(0x0f << (8 * (n)))

/* IPA_QSB_MAX_WRITES register */
#define GEN_QMB_0_MAX_WRITES_BMSK		0x0000000f
#define GEN_QMB_1_MAX_WRITES_BMSK		0x000000f0

/* IPA_QSB_MAX_READS register */
#define GEN_QMB_0_MAX_READS_BMSK		0x0000000f
#define GEN_QMB_1_MAX_READS_BMSK		0x000000f0

/* IPA_QSB_MAX_READS_BEATS register */
#define GEN_QMB_0_MAX_READS_BEATS_BMSK_V4_0	0x00ff0000
#define GEN_QMB_1_MAX_READS_BEATS_BMSK_V4_0	0xff000000

/* IPA_TX_CFG register */
#define TX0_PREFETCH_DISABLE_BMSK_V3_5		0x00000001
#define TX1_PREFETCH_DISABLE_BMSK_V3_5		0x00000002
#define PREFETCH_ALMOST_EMPTY_SIZE_BMSK_V3_5	0x0000001c

/* IPA_TX_CFG register v4.0 */
#define PREFETCH_ALMOST_EMPTY_SIZE_TX1_BMSK_V4_0 0x0001e000
#define PA_MASK_EN_BMSK_V4_0			0x00001000
#define DMAW_SCND_OUTSD_PRED_EN_BMSK_V4_0	0x00000800
#define DMAW_MAX_BEATS_256_DIS_BMSK_V4_0	0x00000400
#define DMAW_SCND_OUTSD_PRED_THRESHOLD_BMSK_V4_0 0x000003c0
#define PREFETCH_ALMOST_EMPTY_SIZE_TX0_BMSK_V4_0 0x0000003c

/* IPA_IDLE_INDICATION_CFG regiser */
#define ENTER_IDLE_DEBOUNCE_THRESH_BMSK_V3_5	0x0000ffff
#define CONST_NON_IDLE_ENABLE_BMSK_V3_5		0x00010000

/* IPA_HPS_FTCH_ARB_QUEUE_WEIGHT register */
#define RX_HPS_QUEUE_WEIGHT_0_BMSK		0x0000000f
#define RX_HPS_QUEUE_WEIGHT_1_BMSK		0x000000f0
#define RX_HPS_QUEUE_WEIGHT_2_BMSK		0x00000f00
#define RX_HPS_QUEUE_WEIGHT_3_BMSK		0x0000f000

#endif /* _IPAHAL_REG_I_H_ */
